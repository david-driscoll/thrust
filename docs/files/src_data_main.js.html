<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\data\main.js - Thrust JS Framework</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="Thrust JS Framework"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/thrust.config.html">thrust.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Convention.html">thrust.Convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.html">thrust.data</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.config.html">thrust.data.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.convention.html">thrust.data.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.Data.html">thrust.data.Data</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.DataFacade.html">thrust.data.DataFacade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.ResponseQueue.html">thrust.data.ResponseQueue</a></li>
            
                <li><a href="..&#x2F;classes/thrust.dom.config.html">thrust.dom.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.dom.convention.html">thrust.dom.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Events.html">thrust.Events</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Facade.html">thrust.Facade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.instance.html">thrust.instance</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Log.html">thrust.Log</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.html">thrust.mediator</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.config.html">thrust.mediator.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.convention.html">thrust.mediator.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.Mediator.html">thrust.mediator.Mediator</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.MediatorFacade.html">thrust.mediator.MediatorFacade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Module.html">thrust.Module</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.html">thrust.spa</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.config.html">thrust.spa.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.convention.html">thrust.spa.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.SinglePageApp.html">thrust.spa.SinglePageApp</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.html">thrust.template</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.config.html">thrust.template.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.convention.html">thrust.template.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.Template.html">thrust.template.Template</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.TemplateFacade.html">thrust.template.TemplateFacade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Thrust.html">thrust.Thrust</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.html">thrust.util</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.array.html">thrust.util.array</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.collection.html">thrust.util.collection</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.func.html">thrust.util.func</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.obj.html">thrust.util.obj</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.type.html">thrust.util.type</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.url.html">thrust.util.url</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.when.html">thrust.util.when</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/thrust.html">thrust</a></li>
            
                <li><a href="..&#x2F;modules/thrust.config.html">thrust.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.data.html">thrust.data</a></li>
            
                <li><a href="..&#x2F;modules/thrust.data.config.html">thrust.data.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.data.convention.html">thrust.data.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.dom.html">thrust.dom</a></li>
            
                <li><a href="..&#x2F;modules/thrust.dom.config.html">thrust.dom.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.dom.convention.html">thrust.dom.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.mediator.html">thrust.mediator</a></li>
            
                <li><a href="..&#x2F;modules/thrust.mediator.config.html">thrust.mediator.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.mediator.convention.html">thrust.mediator.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.spa.html">thrust.spa</a></li>
            
                <li><a href="..&#x2F;modules/thrust.spa.config.html">thrust.spa.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.spa.convention.html">thrust.spa.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.template.html">thrust.template</a></li>
            
                <li><a href="..&#x2F;modules/thrust.template.config.html">thrust.template.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.template.convention.html">thrust.template.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.html">thrust.util</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.array.html">thrust.util.array</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.collection.html">thrust.util.collection</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.func.html">thrust.util.func</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.obj.html">thrust.util.obj</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.type.html">thrust.util.type</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.url.html">thrust.util.url</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.when.html">thrust.util.when</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src\data\main.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([
    &#x27;jquery&#x27;,
    &#x27;thrust&#x2F;util&#x27;,
    &#x27;thrust&#x2F;log&#x27;,
    &#x27;.&#x2F;config&#x27;,
    &#x27;thrust&#x2F;config&#x27;,
    &#x27;.&#x2F;event.factory&#x27;,
    &#x27;.&#x2F;response.queue&#x27;,
    &#x27;thrust&#x2F;events&#x27;,
    &#x27;thrust&#x2F;facade&#x27;,
    &#x27;.&#x2F;event.types&#x27;,
    &#x27;has&#x27;
],
function (jQuery, util, log, config, tConfig, eventFactory, ResponseQueue, events, facade, eventTypes, has)
{
    &#x27;use strict&#x27;;
    &#x2F;&#x2F; Variable declaration.
    var format          = util.format,
        extend          = util.extend,
        type            = util.type,
        when            = util.when,
        slice           = Array.prototype.slice,
        ajax            = jQuery.ajax,
        uid             = util.uniqueId,
        dataEventWait   = eventTypes[&#x27;wait&#x27;],
        dataEventStart  = eventTypes[&#x27;start&#x27;],
        dataEventStop   = eventTypes[&#x27;stop&#x27;],
        dataEventStatus = eventTypes[&#x27;status&#x27;],
        argumentResolver = function (method)
        {
            return function ()
            {
                return method(util.toArray(arguments));
            };
        };

    jQuery.ajaxSettings.traditional = !!tConfig.url.traditionalEncoding;

    var jDoc = jQuery(document);

    eventFactory.init(jDoc);
    &#x2F;&#x2F;#region DataFacade
    &#x2F;**
    The data facade that is handed off to modules.


    Enables data transport, using jQuery for thrust.

    @for thrust.data
    @class thrust.data.DataFacade
    @param {thrust.Module} module The module to create the facade for
    @param {thrust.data.Data} parent The parent thrust data object to create the facade for.
    @constructor
    **&#x2F;
    var DataFacade = facade.createFacade(function (module, parent)
    {
        this.name = module.name + &#x27;-data&#x27;;
        this.module = module;
        this.parent = parent;
        this.__conventions = parent.__conventions;
        this._callbacks = parent._callbacks;
        this.responseQueue = parent.responseQueue;
        this.initEvents();

        this.defaults = parent.defaults;
        this.appPath = parent.appPath;
    });
    util.extend(DataFacade.fn, events);
    &#x2F;&#x2F;#endregion

    &#x2F;**
    The master data plugin.


    Enables data transport, using jQuery for thrust.

    @for thrust.data
    @class thrust.data.Data
    @param {String} name The thrust instance name.
    @param {thrust.mediator.Mediator} mediator The thrust mediator instance.
    @param {Object} config The thrust instance configuration.
    @constructor
    **&#x2F;
    var Data = function (name, mediator, config)
    {
        &#x2F;&#x2F; Enforce new
        if (!(this instanceof Data))
            return new Data(name, mediator);

        if (!name)
            throw new Error(&#x27;Data: module name must be defined.&#x27;);

        this.responseQueue = new ResponseQueue(this, config.data.startTimeout, config.data.finishTimeout);

        has(&#x27;DEBUG&#x27;) &amp;&amp; log.debug(&#x27;Data: Creating new Data&#x27;);

        this.mediator = mediator;
        this._callbacks = this.mediator._callbacks;
        this.initEvents();

        this.defaults = {
            cache: config.data.cache,
            beforeSend: eventFactory.beforeSendMethod,
            contentType: &#x27;application&#x2F;json&#x27;,
            type: &#x27;POST&#x27;,
            url: &#x27;&#x27;,
            data: &#x27;&#x27;,
            dataType: &#x27;json&#x27;,
            __mediator_data_fired__: true,
            silent: false
        };

        this.appPath = config.url.path + &#x27;&#x2F;&#x27;;
    };

    var DataMethods = {
        &#x2F;**
        Creates a DataFacade for the given module.

        @for thrust.data.Data
        @method createFacade
        @param {Thrust} thrust The thrust instance
        @param {Module} module The module
        @param {Object} facades The available facades
        @returns {DataFacade} The new DataFacade
        **&#x2F;
        createFacade: function (thrust, module, facades)
        {
            if (module.data &amp;&amp; !(facades.data instanceof DataFacade)) throw new Error(&#x27;&quot;data&quot; is a reserved property&#x27;);

            var data;
            if (facades.data)
            {
                facades.data.updateFacade(module, this);
                data = facades.data;
            }
            else
            {
                data = facades.data = module.data = new DataFacade(module, this);
            }
            return data;
        },
    };

    var DataPrototype = {
        &#x2F;**
        Does a GET to the server, for the given data and settings.

        @for thrust.data.Data
        @method getData
        @param {String} url The url to get data from
        @param {Object} data The data to pass to the given url
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        &#x2F;**
        Does a GET to the server, for the given data and settings.

        @for thrust.data.DataFacade
        @method getData
        @param {String} url The url to get data from
        @param {Object} data The data to pass to the given url
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        getData: function (url, data, settings)
        {
            settings = !settings ? { data: data } : extend(settings, { data: data });
            return this.get(url, settings);
        },
        &#x2F;**
        Does a POST to the server, for the given data and settings.

        @for thrust.data.Data
        @method postData
        @param {String} url The url to get data from
        @param {Object} data The data to pass to the given url
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        &#x2F;**
        Does a POST to the server, for the given data and settings.

        @for thrust.data.DataFacade
        @method postData
        @param {String} url The url to get data from
        @param {Object} data The data to pass to the given url
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        postData: function (url, data, settings)
        {
            settings = !settings ? { data: JSON.stringify(data) } : extend(settings, { data: JSON.stringify(data) });
            return this.post(url, settings);
        },
        &#x2F;**
        Does a GET to the server, using the given settings.

        Data must be passed in using settings: { data: {} } otherwise use getData.

        @for thrust.data.Data
        @method get
        @param {String} url The url to get data from
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        &#x2F;**
        Does a GET to the server, using the given settings.

        Data must be passed in using settings: { data: {} } otherwise use getData.

        @for thrust.data.DataFacade
        @method get
        @param {String} url The url to get data from
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        get: function (url, settings, skipQueue)
        {
            if (settings === undefined &amp;&amp; typeof url === &#x27;object&#x27;)
            {
                settings = url;
                url = settings.url;
            }

            if (url === undefined &amp;&amp; settings.url !== undefined)
                url = settings.url;
            if (url === undefined)
                throw new Error(&#x27;No url is defined&#x27;);

            return this.ajax(url, extend(settings || {}, { type: &#x27;get&#x27; }), skipQueue);
        },
        &#x2F;**
        Does a POST to the server, using the given settings.

        Data must be passed in using settings: { data: {} } otherwise use postData.

        @for thrust.data.Data
        @method post
        @param {String} url The url to get data from
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        &#x2F;**
        Does a POST to the server, using the given settings.

        Data must be passed in using settings: { data: {} } otherwise use postData.

        @for thrust.data.DataFacade
        @method post
        @param {String} url The url to get data from
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        post: function (url, settings, skipQueue)
        {
            if (settings === undefined &amp;&amp; typeof url === &#x27;object&#x27;)
            {
                settings = url;
                url = settings.url;
            }

            if (url === undefined &amp;&amp; settings.url !== undefined)
                url = settings.url;
            if (url === undefined)
                throw new Error(&#x27;No url is defined&#x27;);

            return this.ajax(url, extend(settings || {}, { type: &#x27;post&#x27; }), skipQueue);
        },
        &#x2F;**
        Does an ajax call to the given url, with the given settings.

        @for thrust.data.Data
        @method ajax
        @param {String} url The url to get data from
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        &#x2F;**
        Does an ajax call to the given url, with the given settings.

        @for thrust.data.DataFacade
        @method ajax
        @param {String} url The url to get data from
        @param {Object} settings The settings of the task to be done
            @param {Boolean} settings.cache Do we cache this call or not.
            @param {Boolean} settings.silent Do we use the built in data queue.
        @returns {Promise} The promise if this request completes or fails
        **&#x2F;
        ajax: function (url, settings, skipQueue)
        {
            var that = this, options, type, beforeSend;
            has(&#x27;DEBUG&#x27;) &amp;&amp; log.info(format(&#x27;Data[{0}]: Fetching data from &quot;{1}&quot;&#x27;, that.namespace, url));

            if (settings === undefined &amp;&amp; typeof url === &#x27;object&#x27;)
            {
                settings = url;
                url = settings.url;
            }
            if (!settings)
                settings = {};

            if (url === undefined &amp;&amp; settings.url !== undefined)
                url = settings.url;


            url = util.fixupUrl(url, that.appPath);

            var module = (that.module &amp;&amp; that.module.module);
            if (settings.silent)
            {
                var dfo = when.defer();

                var queryId = uid(&#x27;dq&#x27;);
                type = settings.type.toLowerCase();

                options = extend({}, that.defaults, { beforeSend: util.noop }, settings);

                ajax(url, options).then(argumentResolver(dfo.resolve), argumentResolver(dfo.reject));
                return dfo.promise;
            }

            options = extend({}, that.defaults, settings, { beforeSend: eventFactory.beforeSendMethod });

            type = options.type.toLowerCase();

            return this.responseQueue.addToQueue(type, url, options);
        }
    };

    util.extend(DataFacade.fn, DataPrototype);

    Data.prototype = Data.fn = util.extend({}, DataMethods, DataPrototype, events);

    &#x2F;&#x2F; Take a hold of jQuery... this is sure to be contravesial
    jQuery.ajax = Data.ajax;

    Data.config = config;

    return Data;
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
