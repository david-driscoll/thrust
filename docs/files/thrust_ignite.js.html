<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>thrust\ignite.js - thrust-js</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="thrust-js"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/thrust.config.html">thrust.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Convention.html">thrust.Convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.html">thrust.data</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.config.html">thrust.data.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.Data.html">thrust.data.Data</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.DataFacade.html">thrust.data.DataFacade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.ResponseQueue.html">thrust.data.ResponseQueue</a></li>
            
                <li><a href="..&#x2F;classes/thrust.dom.config.html">thrust.dom.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.dom.convention.html">thrust.dom.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Events.html">thrust.Events</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Facade.html">thrust.Facade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.instance.html">thrust.instance</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Log.html">thrust.Log</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.html">thrust.mediator</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.config.html">thrust.mediator.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.convention.html">thrust.mediator.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.Mediator.html">thrust.mediator.Mediator</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.MediatorFacade.html">thrust.mediator.MediatorFacade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Module.html">thrust.Module</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.html">thrust.spa</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.config.html">thrust.spa.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.convention.html">thrust.spa.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.SinglePageApp.html">thrust.spa.SinglePageApp</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.html">thrust.template</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.config.html">thrust.template.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.Template.html">thrust.template.Template</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.TemplateFacade.html">thrust.template.TemplateFacade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Thrust.html">thrust.Thrust</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.html">thrust.util</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.url.html">thrust.util.url</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.when.html">thrust.util.when</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/thrust.html">thrust</a></li>
            
                <li><a href="..&#x2F;modules/thrust.config.html">thrust.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.data.html">thrust.data</a></li>
            
                <li><a href="..&#x2F;modules/thrust.data.config.html">thrust.data.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.dom.html">thrust.dom</a></li>
            
                <li><a href="..&#x2F;modules/thrust.dom.convention.html">thrust.dom.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.mediator.html">thrust.mediator</a></li>
            
                <li><a href="..&#x2F;modules/thrust.mediator.config.html">thrust.mediator.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.mediator.convention.html">thrust.mediator.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.spa.html">thrust.spa</a></li>
            
                <li><a href="..&#x2F;modules/thrust.spa.config.html">thrust.spa.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.spa.convention.html">thrust.spa.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.template.html">thrust.template</a></li>
            
                <li><a href="..&#x2F;modules/thrust.template.config.html">thrust.template.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.html">thrust.util</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.func.html">thrust.util.func</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.type.html">thrust.util.type</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.url.html">thrust.util.url</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.when.html">thrust.util.when</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: thrust\ignite.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([&quot;require&quot;, &quot;exports&quot;, &#x27;module&#x27;, &#x27;thrust&#x2F;util&#x27;, &#x27;.&#x2F;config&#x27;, &#x27;.&#x2F;capsule&#x27;], function(require, exports, __requireModule__, __util__, __config__, __tm__) {
    &#x2F;&#x2F;&#x2F; &lt;reference path=&quot;interfaces&#x2F;thrust.d.ts&quot; &#x2F;&gt;
    &#x2F;&#x2F;&#x2F; &lt;reference path=&quot;..&#x2F;lib&#x2F;DefinitelyTyped&#x2F;requirejs&#x2F;require-2.1.d.ts&quot; &#x2F;&gt;
    &#x2F;&#x2F; Disabled until TS supports module per file in some way (ie exports is exports.&lt;export&gt; not  exports.moduleName.&lt;export&gt;)
    &#x2F;*export module instance {*&#x2F;
    &#x27;use strict&#x27;;
    var requireModule = __requireModule__;

    var util = __util__;

    var _ = util._;
    
    var config = __config__;

    var tm = __tm__;

    var slice = Array.prototype.slice, isArray = _.isArray, toArray = _.toArray, isFunction = _.isFunction, each = _.each, map = _.map, any = _.any, all = _.all, when = util.when, extend = _.extend, flatten = _.flatten, pluck = _.pluck, isObject = _.isObject, keys = _.keys, union = _.union, stageOneComplete = {
    };
    function reconcileArrays(config, settings, to) {
        var keys = _.keys(config);
        if(settings) {
            keys = union(_.keys(settings), keys);
        } else {
            settings = {
            };
        }
        each(keys, function (i) {
            var x = settings[i] || config[i];
            if(isArray(x)) {
                to[i] = toArray(settings[i] || to[i]);
            } else {
                if(isObject(x) &amp;&amp; !isFunction(x)) {
                    reconcileArrays(x, null, to[i]);
                }
            }
        });
    }
    &#x2F;**
    Contructs a wire spec for thrust to launch from.
    
    @module thrust
    **&#x2F;
    &#x2F;**
    Merges a all the plugins configurations, with the default config, and then finally with
    any customized config from requirejs
    
    @method stageOne
    @param {Object} settings The settints to pass onto the thrust instance being created.
    **&#x2F;
    function stageOne(settings) {
        &#x2F;*jshint validthis:true *&#x2F;
        var that = this;
        if(stageOneComplete[settings.name]) {
            return that.stateTwo(settings);
        }
        var plugins = [
&#x27;thrust&#x2F;mediator&#x27;        ].concat(settings.plugins || requireModule.config().plugins || config.plugins || []), defer = when.defer();
        settings.plugins = plugins;
        require(plugins.map(function (x) {
            return x;
        }), function () {
            var args = arguments;
            plugins.forEach(function (plugin, i) {
                var name = plugin.substring(plugin.lastIndexOf(&#x27;&#x2F;&#x27;) + 1);
                var pluginClass = args[i][args[i].className];
                config[name] = pluginClass.config;
            });
            _.merge(config, requireModule.config());
            when.chain(that.stateTwo(settings), defer);
        });
        stageOneComplete[settings.name] = true;
        return defer.promise;
    }
    exports.stageOne = stageOne;
    &#x2F;**
    Creates a thrust instance, from the given settings.
    Including the plugins.
    
    @method stateTwo
    @param {Object} settings The settints to pass onto the thrust instance being created.
    **&#x2F;
    function stateTwo(settings) {
        &#x2F;*jshint loopfunc:true *&#x2F;
        &#x2F;&#x2F; Get the configuration
                var localConfig = _.merge({
        }, config, settings), defer = when.defer();
        &#x2F;&#x2F; Reconicle the arrays so they are properly arrays
        reconcileArrays(config, settings, localConfig);
        &#x2F;&#x2F; Mediator is a required plugin, include all the others in addition to it.
                var plugins = localConfig.plugins, modulesToLoad = &#x2F;&#x2F; The modules to load
        [], modulesConfigurations = &#x2F;&#x2F; The module configuration object
        {
thrust: &#x27;thrust&#x27;        };
        &#x2F;&#x2F; Loop through all the plugins, creating a proper dependancy list.
        for(var i = 0, iLen = plugins.length; i &lt; iLen; i++) {
            var plugin = plugins[i], name = plugin.substring(plugin.lastIndexOf(&#x27;&#x2F;&#x27;) + 1), pluginConfig = localConfig[name];
            modulesToLoad.push(plugin);
            modulesToLoad.push(pluginConfig &amp;&amp; pluginConfig.conventions || []);
            modulesConfigurations[plugin] = pluginConfig;
        }
        &#x2F;&#x2F; Name and cfg are default properties of the configuration context
                var orderedPlugins = [
&#x27;name&#x27;, 
&#x27;cfg&#x27;        ], reloop = &#x2F;&#x2F; We loop through until all the plugins are in proper order.
        true, iLen = modulesToLoad.length, i = 0;
        &#x2F;&#x2F; Loop through all the plugins until we have a set that will load in proper order.
        while(i &lt; iLen) {
            &#x2F;&#x2F; The plugin
                        var plugin = modulesToLoad[i], name = &#x2F;&#x2F; The implied plugin name
            plugin.substring(plugin.lastIndexOf(&#x27;&#x2F;&#x27;) + 1), pluginConfig = &#x2F;&#x2F; The plugins configuration
            localConfig[name];
            &#x2F;&#x2F; Check if the plugin has to resolve anything.
            if(pluginConfig &amp;&amp; pluginConfig.resolve &amp;&amp; pluginConfig.resolve.length &gt; 0 &amp;&amp; !all(pluginConfig.resolve, function (x) {
                return any(orderedPlugins, function (z) {
                    return x === z || x === z;
                });
            })) {
                &#x2F;&#x2F; The modules to load.
                &#x2F;&#x2F; Also includes any conventions.
                modulesToLoad.push.apply(modulesToLoad, modulesToLoad.splice(i, 2));
            } else {
                &#x2F;&#x2F; reorder the plugin
                i += 2;
                orderedPlugins.push(name);
            }
        }
        &#x2F;&#x2F; The modules config
        var modules = localConfig.modules || [];
        &#x2F;&#x2F; Thrust and thrust&#x2F;capsule also need to be loaded.
        modulesToLoad.push.apply(modulesToLoad, [
            &#x27;thrust&#x27;
        ]);
        &#x2F;&#x2F; Flatten the resultant array
        modulesToLoad = flatten(modulesToLoad);
        &#x2F;&#x2F; Create the configuration spec
        var spec = {
            name: localConfig.name || &#x27;global&#x27;,
            cfg: localConfig
        };
        &#x2F;&#x2F; Load everything
        require(modulesToLoad, function () {
            &#x2F;&#x2F; Get ready to loop
                        var currentPlugin = null, allConventions = [];
            &#x2F;&#x2F; Loop through all the modules being loaded
            for(var i = 0, iLen = modulesToLoad.length; i &lt; iLen; i++) {
                &#x2F;&#x2F; Get plugin and configuration
                                var plugin = modulesToLoad[i], mConfig = modulesConfigurations[plugin];
                &#x2F;&#x2F; Check if we have a configuration object
                if(mConfig) {
                    &#x2F;&#x2F; Load a new plugin.
                                        var pluginObject = arguments[i], name = &#x2F;&#x2F; Get the plugin name
                    plugin.substring(plugin.lastIndexOf(&#x27;&#x2F;&#x27;) + 1), resolveItems = &#x2F;&#x2F; Resolve all the required items.
                    map(mConfig.resolve, function (x) {
return spec[x];                    });
                    var pluginClass = pluginObject[pluginObject.className];
                    &#x2F;&#x2F; Instantiate the plugin
                    currentPlugin = spec[name] = util.instantiate(pluginClass, resolveItems);
                    &#x2F;&#x2F; Setup the conventions
                    currentPlugin.__conventions = [];
                } else {
                    &#x2F;&#x2F; Load all the conventions
                    if(currentPlugin) {
                        &#x2F;&#x2F; Load the conventions into the plugin
                        _.forOwn(arguments[i], function (x) {
                            return currentPlugin.__conventions.push(x);
                        });
                        &#x2F;&#x2F; Load the conventions into the thrust instance.
                        _.forOwn(arguments[i], function (x) {
                            return allConventions.push(x);
                        });
                    }
                }
            }
            &#x2F;&#x2F; The last current plugin, will always be thrust.
            currentPlugin.__conventions = allConventions;
            &#x2F;&#x2F; Extend thrust with the spec
            extend(currentPlugin, spec);
            defer.resolve(spec);
        }, defer.reject);
        return defer.promise;
    }
    exports.stateTwo = stateTwo;
    &#x2F;**
    Loads up the default modules as indicated to thrust.
    
    @method stageThree
    @param {Object} context The context to use to load the modules.
    **&#x2F;
    function stageThree(context) {
        var thrust = context.thrust, defer = when.defer(), modules = context.cfg.modules;
        require(modules, function () {
            var args = [];
            for (var _i = 0; _i &lt; (arguments.length - 0); _i++) {
                args[_i] = arguments[_i + 0];
            }
            var Module = tm.Module;
            &#x2F;&#x2F; Get the definitions
            var moduleDefinitions = args;
            &#x2F;&#x2F; Loop over all the modules
            for(var i = 0, iLen = modules.length; i &lt; iLen; i++) {
                &#x2F;&#x2F; Get the module name
                                var mod = modules[i], definition = &#x2F;&#x2F; Get the definition
                moduleDefinitions[i];
                &#x2F;&#x2F; Create the instance
                var moduleInstance = new Module(thrust, definition, mod);
                &#x2F;&#x2F; Inject it into the thrust instance
                moduleInstance.thrustCreate(thrust);
            }
            defer.resolve();
        }, defer.reject);
        return defer.promise;
    }
    exports.stageThree = stageThree;
})
&#x2F;&#x2F;@ sourceMappingURL=ignite.js.map

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
