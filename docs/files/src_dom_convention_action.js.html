<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src\dom\convention\action.js - Thrust JS Framework</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="Thrust JS Framework"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.1.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/thrust.config.html">thrust.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Convention.html">thrust.Convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.html">thrust.data</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.config.html">thrust.data.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.convention.html">thrust.data.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.Data.html">thrust.data.Data</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.DataFacade.html">thrust.data.DataFacade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.data.ResponseQueue.html">thrust.data.ResponseQueue</a></li>
            
                <li><a href="..&#x2F;classes/thrust.dom.config.html">thrust.dom.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.dom.convention.html">thrust.dom.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Events.html">thrust.Events</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Facade.html">thrust.Facade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.instance.html">thrust.instance</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Log.html">thrust.Log</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.html">thrust.mediator</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.config.html">thrust.mediator.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.convention.html">thrust.mediator.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.Mediator.html">thrust.mediator.Mediator</a></li>
            
                <li><a href="..&#x2F;classes/thrust.mediator.MediatorFacade.html">thrust.mediator.MediatorFacade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Module.html">thrust.Module</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.html">thrust.spa</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.config.html">thrust.spa.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.convention.html">thrust.spa.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.spa.SinglePageApp.html">thrust.spa.SinglePageApp</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.html">thrust.template</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.config.html">thrust.template.config</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.convention.html">thrust.template.convention</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.Template.html">thrust.template.Template</a></li>
            
                <li><a href="..&#x2F;classes/thrust.template.TemplateFacade.html">thrust.template.TemplateFacade</a></li>
            
                <li><a href="..&#x2F;classes/thrust.Thrust.html">thrust.Thrust</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.html">thrust.util</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.array.html">thrust.util.array</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.collection.html">thrust.util.collection</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.func.html">thrust.util.func</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.obj.html">thrust.util.obj</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.type.html">thrust.util.type</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.url.html">thrust.util.url</a></li>
            
                <li><a href="..&#x2F;classes/thrust.util.when.html">thrust.util.when</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/thrust.html">thrust</a></li>
            
                <li><a href="..&#x2F;modules/thrust.config.html">thrust.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.data.html">thrust.data</a></li>
            
                <li><a href="..&#x2F;modules/thrust.data.config.html">thrust.data.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.data.convention.html">thrust.data.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.dom.html">thrust.dom</a></li>
            
                <li><a href="..&#x2F;modules/thrust.dom.config.html">thrust.dom.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.dom.convention.html">thrust.dom.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.mediator.html">thrust.mediator</a></li>
            
                <li><a href="..&#x2F;modules/thrust.mediator.config.html">thrust.mediator.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.mediator.convention.html">thrust.mediator.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.spa.html">thrust.spa</a></li>
            
                <li><a href="..&#x2F;modules/thrust.spa.config.html">thrust.spa.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.spa.convention.html">thrust.spa.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.template.html">thrust.template</a></li>
            
                <li><a href="..&#x2F;modules/thrust.template.config.html">thrust.template.config</a></li>
            
                <li><a href="..&#x2F;modules/thrust.template.convention.html">thrust.template.convention</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.html">thrust.util</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.array.html">thrust.util.array</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.collection.html">thrust.util.collection</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.func.html">thrust.util.func</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.obj.html">thrust.util.obj</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.type.html">thrust.util.type</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.url.html">thrust.util.url</a></li>
            
                <li><a href="..&#x2F;modules/thrust.util.when.html">thrust.util.when</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src\dom\convention\action.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
define([
    &#x27;thrust&#x2F;convention&#x27;,
    &#x27;thrust&#x2F;util&#x27;,
    &#x27;jquery&#x27;
],
function (Convention, util, $)
{
    var format     = util.format,
        ACTIONS    = &#x27;actions&#x27;,
        STRING     = &#x27;string&#x27;,
        isFunction = util.isFunction,
        isString   = util.isString,
        isArray    = util.isArray;

    var actionHandlers = {
        _registrations: {},
        register: function (eventName, acionName, handler, context)
        {
            var that = this;
            if (!that._registrations[eventName])
                that._registrations[eventName] = {};

            if (!that._registrations[eventName][acionName])
            {
                that._registrations[eventName][acionName] = handler;
                if (context) that._registrations[eventName][acionName].context = context;
            }
            else
                throw new Error(format(&#x27;The action {1} handler &quot;{0}&quot; has already been taken!&#x27;, acionName, eventName));
        },
        unregister: function (eventName, acionName)
        {
            var that = this;
            if (that._registrations[eventName] &amp;&amp; that._registrations[eventName][acionName])
            {
                that._registrations[eventName][acionName] = null;
                delete that._registrations[eventName][acionName];
            }
        },
        callbackFor: function (eventName, returnResults)
        {
            var that = this;
            var actionAttribute = &#x27;data-action-&#x27; + eventName,
                returnResultsDefined = typeof returnResults !== &#x27;undefined&#x27;;

            return function ()
            {
                var attributeValue = $(this).attr(actionAttribute);
                if (typeof attributeValue === STRING)
                {
                    var method = that._registrations[eventName][attributeValue];
                    if (method)
                        method.apply(method.context || this, arguments);
                    if (returnResultsDefined)
                        return returnResults;
                    return false;
                }
            };
        }
    };

    &#x2F;**
    @module thrust.dom
    @submodule thrust.dom.convention
    **&#x2F;

    &#x2F;**
    * # __thrust&#x2F;dom__ Convention - Actions
    *
    * The dom action convention allows you to create custom actions, that execute when a certian event happen.
    *
    *
    *## Supported events
    * * &#x60;click&#x60;
    *
    * NOTE: More events will be added when they make sense to add them.
    *
    *
    * The definition can accept all of the following:
    *
    * * &#x60;function()&#x60; - This function will be run when the action is invoked.
    * * &#x60;string&#x60; - This string must point at a function, that exists on the module definition.
    * * &#x60;[function(), context]&#x60; - Where the context is the context that the function will be called with.
    * * &#x60;[string, context]&#x60; - Where the context is the context that the function will be called with.
    *
    *
    * The definition that is used to define an action is below...
    *
    * NOTE: The below is written as if it were part of a module definition.
    *
    *
    *     actions: {
    *         &#x27;click&#x27;: {
    *             &#x27;doFunction&#x27;: function()
    *             {
    *                 alert(&#x27;My awesome alert here!&#x27;);
    *             },
    *             &#x27;doString&#x27;: &#x27;actionString&#x27;,
    *             &#x27;doContextFunction&#x27;: [function()
    *             {
    *                 alert(&#x27;My awesome alert here!&#x27;);
    *             }, context],
    *             &#x27;doString&#x27;: [&#x27;actionString&#x27;, context],
    *         }
    *     },
    *     actionString: function()
    *     {
    *         alert(&#x27;My awesome alert here!&#x27;);
    *     }
    *
    * To utlize the action, simply add a &#x60;data-action-{event}&#x60; attribute, with the name of the action as the va;ie to any of the following elements:
    *
    * * &#x60;a&#x60;
    * * &#x60;button&#x60;
    * * &#x60;input[type=&quot;button&quot;]&#x60;
    * * &#x60;input[type=&quot;submit&quot;]&#x60;
    *
    * @for thrust.dom.convention
    * @property actions
    **&#x2F;
    return new Convention({
        properties: [ACTIONS],
        ignite: function()
        {
            $(window.document.body).on(&#x27;click.&#x27; + ACTIONS, &#x27;a, button, input[type=&quot;button&quot;], input[type=&quot;submit&quot;]&#x27;, actionHandlers.callbackFor(&#x27;click&#x27;, false));
        },
        ready: function (facade, module)
        {
            var actions = module.convention(ACTIONS),
                dom = facade,
                moduleInstance = module.instance;

            if (actions)
            {
                for (var actionEvent in actions)
                {
                    var actionCollection = actions[actionEvent];
                    for (var actionName in actionCollection)
                    {
                        var action = actionCollection[actionName],
                            args;

                        if (isFunction(action))
                        {
                            args = [actionEvent, actionName, action];
                        }
                        else if (isString(action))
                        {
                            args = [actionEvent, actionName, moduleInstance[action]];
                        }
                        else if (isArray(action))
                        {
                            if (isFunction(action[0]))
                            {
                                args = [actionEvent, actionName].concat(action);
                            }
                            else if (isString(action[0]))
                            {
                                action[0] = moduleInstance[action[0]];
                                args = [actionEvent, actionName].concat(action);
                            }
                        }
                        actionHandlers.register.apply(actionHandlers, args);
                    }
                }
            }
        },
        stop: function (facade, module)
        {
            var dom = facade,
                actions = module.convention(ACTIONS),
                moduleInstance = module.instance,
                dom = facade.dom;

            if (actions)
            {
                for (var actionEvent in actions)
                {
                    var actionCollection = actions[actionEvent];
                    for (var actionName in actionCollection)
                    {
                        actionHandlers.unregister(actionEvent, actionName);
                    }
                }
            }
        }
    });
});
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
