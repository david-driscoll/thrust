{
  "name": "requirejs-text",
  "version": "2.0.3",
  "description": "An AMD loader plugin for loading text resources.",
  "categories": [
    "Loader plugins"
  ],
  "main": "text.js",
  "github": "https://github.com/requirejs/text",
  "bugs": {
    "url": "https://github.com/requirejs/text/issues"
  },
  "repositories": [
    {
      "type": "git",
      "url": "https://github.com/requirejs/text.git"
    }
  ],
  "licenses": [
    {
      "type": "MIT",
      "url": "http://www.opensource.org/licenses/mit-license.php"
    },
    {
      "type": "BSD New",
      "url": "http://opensource.org/licenses/BSD-3-Clause"
    }
  ],
  "volo": {
    "url": "https://raw.github.com/requirejs/text/{version}/text.js"
  },
  "readme": "# text\r\n\r\nA [RequireJS](http://requirejs.org)/AMD loader plugin for loading text\r\nresources.\r\n\r\nKnown to work in RequireJS, but should work in other AMD loaders that support\r\nthe same loader plugin API.\r\n\r\n## Docs\r\n\r\nSee the [RequireJS API text section](http://requirejs.org/docs/api.html#text).\r\n\r\n## Latest release\r\n\r\nThe latest release is always available from [the \"latest\" tag](https://raw.github.com/requirejs/text/latest/text.js).\r\n\r\nIt can also be installed using [volo](https://github.com/volojs/volo):\r\n\r\n    volo add requirejs/text\r\n\r\n## Usage\r\n\r\nIt is nice to build HTML using regular HTML tags, instead of building up DOM\r\nstructures in script. However, there is no good way to embed HTML in a\r\nJavaScript file. The best that can be done is using a string of HTML, but that\r\ncan be hard to manage, particularly for multi-line HTML.\r\n\r\nThe text.js AMD loader plugin can help with this issue. It will automatically be\r\nloaded if the text! prefix is used for a dependency. Download the plugin and put\r\nit in the app's [baseUrl](http://requirejs.org/docs/api.html#config-baseUrl)\r\ndirectory.\r\n\r\nYou can specify a text file resource as a dependency like so:\r\n\r\n```javascript\r\nrequire([\"some/module\", \"text!some/module.html\", \"text!some/module.css\"],\r\n    function(module, html, css) {\r\n        //the html variable will be the text\r\n        //of the some/module.html file\r\n        //the css variable will be the text\r\n        //of the some/module.css file.\r\n    }\r\n);\r\n```\r\n\r\nNotice the .html and .css suffixes to specify the extension of the file. The\r\n\"some/module\" part of the path will be resolved according to normal module name\r\nresolution: it will use the **baseUrl** and **paths** [configuration\r\noptions](http://requirejs.org/docs/api.html#config) to map that name to a path.\r\n\r\nFor HTML/XML/SVG files, there is another option. You can pass !strip, which\r\nstrips XML declarations so that external SVG and XML documents can be added to a\r\ndocument without worry. Also, if the string is an HTML document, only the part\r\ninside the body tag is returned. Example:\r\n\r\n```javascript\r\nrequire([\"text!some/module.html!strip\"],\r\n    function(html) {\r\n        //the html variable will be the text of the\r\n        //some/module.html file, but only the part\r\n        //inside the body tag.\r\n    }\r\n);\r\n```\r\n\r\nThe text files are loaded via asynchronous XMLHttpRequest (XHR) calls, so you\r\ncan only fetch files from the same domain as the web page (see **XHR\r\nrestrictions** below).\r\n\r\nHowever, [the RequireJS optimizer](http://requirejs.org/docs/optimization.html)\r\nwill inline any text! references with the actual text file contents into the\r\nmodules, so after a build, the modules that have text! dependencies can be used\r\nfrom other domains.\r\n\r\n## Configuration\r\n\r\n### XHR restrictions\r\n\r\nThe text plugin works by using XMLHttpRequest (XHR) to fetch the text for the\r\nresources it handles.\r\n\r\nHowever, XHR calls have some restrictions, due to browser/web security policies:\r\n\r\n1) Many browsers do not allow file:// access to just any file. You are better\r\noff serving the application from a local web server than using local file://\r\nURLs. You will likely run into trouble otherwise.\r\n\r\n2) There are restrictions for using XHR to access files on another web domain.\r\nWhile CORS can help enable the server for cross-domain access, doing so must\r\nbe done with care (in particular if you also host an API from that domain),\r\nand not all browsers support CORS.\r\n\r\nSo if the text plugin determines that the request for the resource is on another\r\ndomain, it will try to access a \".js\" version of the resource by using a\r\nscript tag. Script tag GET requests are allowed across domains. The .js version\r\nof the resource should just be a script with a define() call in it that returns\r\na string for the module value.\r\n\r\nExample: if the resource is 'text!example.html' and that resolves to a path\r\non another web domain, the text plugin will do a script tag load for\r\n'example.html.js'.\r\n\r\nThe [requirejs optimizer](http://requirejs.org/docs/optimization.html) will\r\ngenerate these '.js' versions of the text resources if you set this in the\r\nbuild profile:\r\n\r\n    optimizeAllPluginResources: true\r\n\r\nIn some cases, you may want the text plugin to not try the .js resource, maybe\r\nbecause you have configured CORS on the other server, and you know that only\r\nbrowsers that support CORS will be used. In that case you can use the\r\n[module config](http://requirejs.org/docs/api.html#config-moduleconfig)\r\n(requires RequireJS 2+) to override some of the basic logic the plugin uses to\r\ndetermine if the .js file should be requested:\r\n\r\n```javascript\r\nrequirejs.config({\r\n    config: {\r\n        text: {\r\n            useXhr: function (url, protocol, hostname, port) {\r\n                //Override function for determining if XHR should be used.\r\n                //url: the URL being requested\r\n                //protocol: protocol of page text.js is running on\r\n                //hostname: hostname of page text.js is running on\r\n                //port: port of page text.js is running on\r\n                //Use protocol, hostname, and port to compare against the url\r\n                //being requested.\r\n                //Return true of false. true means \"use xhr\", false means\r\n                //\"fetch the .js version of this resource\".\r\n            }\r\n        }\r\n    }\r\n});\r\n```\r\n\r\n### Custom XHR hooks\r\n\r\nThere may be cases where you might want to provide the XHR object to use\r\nin the request, or you may just want to add some custom headers to the\r\nXHR object used to make the request. You can use the following hooks:\r\n\r\n```javascript\r\nrequirejs.config({\r\n    config: {\r\n        text: {\r\n            onXhr: function (xhr, url) {\r\n                //Called after the XHR has been created and after the\r\n                //xhr.open() call, but before the xhr.send() call.\r\n                //Useful time to set headers.\r\n                //xhr: the xhr object\r\n                //url: the url that is being used with the xhr object.\r\n            },\r\n            createXhr: function () {\r\n                //Overrides the creation of the XHR object. Return an XHR\r\n                //object from this function.\r\n                //Available in text.js 2.0.1 or later.\r\n            }\r\n        }\r\n    }\r\n});\r\n```\r\n\r\n### Forcing the environment implemention\r\n\r\nThe text plugin tries to detect what environment it is available for loading\r\ntext resources, Node, XMLHttpRequest (XHR) or Rhino, but sometimes the\r\nNode or Rhino environment may have loaded a library that introduces an XHR\r\nimplementation. You can foce the environment implementation to use by passing\r\nan \"env\" module config to the plugin:\r\n\r\n```javascript\r\nrequirejs.config({\r\n    config: {\r\n        text: {\r\n            //Valid values are 'node', 'xhr', or 'rhino'\r\n            env: 'rhino'\r\n        }\r\n    }\r\n});\r\n```\r\n\r\n## License\r\n\r\nDual-licensed -- new BSD or MIT.\r\n\r\n## Where are the tests?\r\n\r\nThey are in the [requirejs](https://github.com/jrburke/requirejs) and\r\n[r.js](https://github.com/jrburke/r.js) repos.\r\n\r\n## History\r\n\r\nThis plugin was in the [requirejs repo](https://github.com/jrburke/requirejs)\r\nup until the requirejs 2.0 release.\r\n",
  "readmeFilename": "README.md",
  "_id": "text@2.0.3",
  "repository": {
    "type": "git",
    "url": "git://github.com/requirejs/text"
  }
}