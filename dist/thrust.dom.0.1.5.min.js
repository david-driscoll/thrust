/*! thrust-js - v0.1.5 - 2013-01-27 */define("thrust/dom/subjquery",["require","exports","jquery","thrust/util","thrust/log","has"],function(e,t,n,r,i,s){function b(e,t){if(!t)return e;if(d(e)){e=p({},e);for(var n in e)n.indexOf(".")===-1&&(e[n+t]=e[n],delete e[n]);return e}if(!e)return t;e=e.split(" ");for(var r=0,i=e.length;r<i;r++){var s=e[r];s.indexOf(".")===-1&&(e[r]=s+t)}return e.join(" ")}function w(){var e=function(t,n,r){return new e.prototype.init(t,n,r||this&&this.namespace)};a.merge(e,o),e.jQuery=o,e.event=o.event,e.fn=e.prototype=p({},o.fn),e.fn.constructor=e,e.fn.init=function(r,i,s){var u=i instanceof e;i&&i instanceof o&&!u&&(i=e(i));var a=o.fn.init.call(this,r,i,t);return s?a.namespace=s:u&&(a.namespace=i.namespace),a},e.fn.init.prototype=e.fn;var t=e(document);return h(y,function(t){e.fn[t]&&(e.fn[t]=null,delete e.fn[t])}),a.each(["on","one","off"],function(t){e.fn[t]=a.wrap(e.fn[t],function(e){var n=[];for(var r=0;r<arguments.length-1;r++)n[r]=arguments[r+1];return!1,n[0]=b(n[0],this.namespace),e.apply(this,n)})}),e.fn.query=e.fn.$=e.fn.find,e}var o=n,u=r,a=u._,f=i,l=s,c=u.format,h=a.each,p=a.extend,d=a.isObject,v=a.isFunction,m=Array.prototype.slice,g=".global",y=["ready","extend","queue","dequeue","clearQueue","promise","bind","unbind","live","die","delegate","undelegate","blur","focus","focusin","focusout","load","resize","scroll","unload","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","error","serialize","serializeArray","ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend","_toggle","fadeTo","stop","slideDown","slideUp","slideToggle","fadeIn","fadeOut","fadeToggle"];t.tQuery=w()}),define("thrust/dom/config",["require","exports"],function(e,t){t.resolve=["name","mediator"],t.conventions=["thrust/dom/convention/action","thrust/dom/convention/context","thrust/dom/convention/event"]}),define("thrust/dom/main",["require","exports","./subjquery","thrust/util","thrust/log","thrust/facade","has","thrust/instance","./config"],function(e,t,n,r,i,s,o,u,a){var f=n,l=f.tQuery,c=r,h=c._,p=i,d=s,v=o,m=u,g=a;t.className="Dom";var y=c.format,b=h.extend,w=h.bind,E=Object.prototype.hasOwnProperty,S=h.isObject,x=Array.prototype.slice,T=c.when,N=h.isArray,C=function(){var e=d.createFacade(function(e,t){this.name=t.name,this.__conventions=t.__conventions,this.context=l(document,undefined,this.name)});return e.prototype.init=function(e){return this._internalEvents=this._internalEvents||[],!1,this},e.prototype.start=function(e){return!1,null},e.prototype.stop=function(e){!1;for(var t=this._internalEvents.length-1;t>=0;t--){var n=this._internalEvents[t];this._internalEvents.splice(t,1),n.context.off.apply(this,N(n)?n:N(n.args)?n.args:[])}return null},e.prototype.destroy=function(e){return!1,delete this._internalEvents,null},e}(),k=function(){function e(e,t){if(!e)throw new Error("Dom: module name must be defined.");!1,this.mediator=t,this._callbacks=t._callbacks,this.initEvents(),this.name=e;var n=this;m.fetchInstance(e).promise.then(function(e){var t={},r=n.createFacade(e,t,{})})}return e.prototype.initEvents=function(){},e.prototype.extend=function(e,t){return null},e.prototype.subscribe=function(e,t,n,r){},e.prototype.unsubscribe=function(e,t,n){},e.prototype.once=function(e,t,n){},e.config=g,e.prototype.createFacade=function(e,t,n){if(!n.dom||n.dom instanceof C){var r;return n.dom?(n.dom.updateFacade(t,this),r=n.dom):r=n.dom=new C(t,this),r}throw new Error('"dom" is a reserved property')},e}();t.Dom=k}),define("thrust/dom",["thrust/dom/main"],function(e){return e}),define("thrust/dom/convention/action",["require","exports","thrust/convention","thrust/util","../subjquery"],function(e,t,n,r,i){var s=n,o=s.Convention,u=r,a=u._,f=i,l=f.tQuery,c=u.format,h="config.dom.actions",p="actions",d="string",v="_registrations",m=a.isFunction,g=a.isString,y=a.isArray,b=function(e){return"data-action-"+e},w=function(){function e(){this.events={}}return e.prototype.register=function(e,t,n){var r=this.events;r[e]||(r[e]={});if(!!r[e][t])throw new Error(c('The action {1} handler "{0}" has already been taken!',t,e));r[e][t]=n},e.prototype.unregister=function(e,t){var n=this.events;n[e]&&n[e][t]&&(n[e][t]=null)},e.prototype.callbackFor=function(e,t){var n=this.events,r=b(e),i=typeof t!="undefined";return function(){var s=l(this).attr(r);if(typeof s===d){var o=n[e][s];return o&&o.handler.apply(o.context||this,arguments),i?t:!1}}},e.actionHandlers={},e.getFor=function(n){return this.actionHandlers[n]?this.actionHandlers[n]:this.actionHandlers[n]=new e},e}(),E={click:["a","button",'input[type="button"]','input[type="submit"]'],dblclick:["a","button",'input[type="button"]','input[type="submit"]'],mouseenter:[""],mouseleave:[""],focus:["input"],blur:["input"]},S=["name","handler","context"],x={properties:[h],ignite:function(e){var t=w.getFor(e.name);e.dom.actionHandler=t;var n=l(window.document.body);a.each(E,function(r,i){n.on(i+"."+p+e.name,r.join(b(i)+", "),t.callbackFor(i,!0))})},deorbit:function(e){var t=w.getFor(e.name),n=l(window.document.body);a.each(E,function(t,r){n.off("."+p+e.name)})},ready:function(e,t){var n=e.convention(h),r=w.getFor(e.thrust.name),i=t,s=e.instance;n&&a.forOwn(n,function(t,n){y(t)?t.length&&(!y(t[0])||g(t[0]))&&(t=[t]):t=[t],a.each(t,function(t){if(y(t)){var i={name:undefined};a.each(S,function(n,r){n==="handler"&&g(t[r])&&(t[r]=e.instance[t[r]]),i[n]=t[r]}),t=i}var s=t.name;if(!t.handler&&t.moduleHandler)t.handler=e.instance[t.moduleHandler];else if(!t.handler)throw new Error("Must define either a handler or module handler.");r.register(n,s,t)})})},stop:function(e,t){var n=e.convention(h),r=w.getFor(e.thrust.name),i=e.instance;if(n)for(var s in n){var o=n[s];for(var u in o)r.unregister(s,u)}}};t.action=new o(x)}),define("thrust/dom/convention/animate.container",["require","exports","thrust/convention","thrust/util"],function(e,t,n,r){var i=n,s=i.Convention,o=r,u=o._,a={anyContainer:"thrust-convention-container-any",changeContainer:"thrust-convention-container-change"},f=u.any,l=u.defer,c=u.bind,h="start-status",p="animate",d="container",v="context",m={properties:[p],init:function(e,t){var n=this,r=e.instance.mediator;r.subscribe(a.changeContainer,c(n.change,n,e))},change:function(e,t){if(e.convention(d)===t&&e.convention(h)){var n=e.convention(p);if(n){var r=e.instance.dom();r.removeClass(n)}}},ready:function(e,t){var n=this,r=e.convention(p),i=e.convention(d),s=e.convention(v),o=t;if(r&&i){var u=o.context.clone().appendTo(o.context.parent());u.addClass(r.replace(/\./g," ").trim()),e.instance.dom=e.instance.$=u,setTimeout(c(n.cleanup,n,o.context.parent(),r,s),2e3)}},cleanup:function(e,t,n){e.find(n).filter(":not("+t+")").remove()}};t.animateContainer=new s(m)}),define("thrust/dom/convention/context",["require","exports","thrust/convention","thrust/util","../subjquery"],function(e,t,n,r,i){var s=n,o=s.Convention,u=r,a=u._,f=i,l=f.tQuery,c="config.dom.context",h={properties:[c],ready:function(e,t){var n=e.convention(c);n&&(e.instance.dom=e.instance.$=l(n,t.context))}};t.context=new o(h)}),define("thrust/dom/convention/event",["require","exports","thrust/convention","thrust/util"],function(e,t,n,r){var i=n,s=i.Convention,o=r,u=o._,a="config.dom.context",f="config.dom.events",l=u.isFunction,c=u.isString,h=u.isArray,p=["selector","data","handler"],d={properties:[f],ready:function(e,t){var n=e.convention(f),r=t.context,i=e.instance;n&&u.forIn(n,function(t,n){h(t)?t.length&&(!h(t[0])||c(t[0]))&&(t=[t]):t=[t],u.each(t,function(t){var i=[n];if(h(t)){i.push.apply(i,t);var s=i[i.length-1];c(s)&&i.length===2?i[i.length-1]=e.instance[s]:!c(s)&&!l(s)&&i.length>2||i.length===5?(s=i[i.length-2],c(s)&&(i[i.length-2]=e.instance[s]),i[i.length-2]=u.bind(i[i.length-2],i.pop())):c(s)&&(i[i.length-1]=e.instance[s])}else u.each(p,function(e){if(t[e]){var n=t[e];e==="handler"&&t.context&&(n=u.bind(n,t.context)),i.push(n)}});r.on.apply(r,i)})})},stop:function(e,t){var n=e.convention(f),r=t.context;r&&r.off()}};t.event=new s(d)});