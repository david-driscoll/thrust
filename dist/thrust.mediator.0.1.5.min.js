/*! thrust-js - v0.1.5 - 2013-01-26 */define("thrust/mediator/config",["require","exports"],function(e,t){t.resolve=["name","cfg"],t.conventions=["thrust/mediator/convention/subscription"]}),define("thrust/mediator/main",["require","exports","thrust/util","thrust/log","thrust/events","thrust/facade","has","thrust/config","./config"],function(e,t,n,r,i,s,o,u,a){var f=n,l=f._,c=r,h=i,p=h.Events,d=s,v=o,m=u,g=a;t.className="Mediator";var y=f.format,b=l.extend,w=f.type,E=f.when,S=l.memoize,x,T=Array.prototype.slice,N=m,C=function(){var e=d.createFacade(function(e,t){this.name=e.name,this.module=e,this.parent=t,this.__conventions=t.__conventions,this._callbacks=t._callbacks,this.initEvents(e)});return l.extend(e.prototype,p),e.prototype.init=function(e){return this._internalSubscriptions||(this._internalSubscriptions=[]),null},e.prototype.start=e.prototype.init,e.prototype.subscribe=function(e,t,n){this._internalSubscriptions.push({events:e,callback:t,context:n}),p.subscribe.call(this,e,t,n)},e.prototype.stop=function(e){if(this._internalSubscriptions){for(var t=this._internalSubscriptions.length-1;t>=0;t--){var n=this._internalSubscriptions[t];this.unsubscribe(n.events,n.callback,n.context)}this._internalSubscriptions=null}return null},e}(),k=function(){function e(e,t){var n=this,r=t&&t.url&&t.url.path;n.name=e,!1,n.initEvents(),n.subscribe("thrust/ready",function(){!1})}return e.prototype.initEvents=function(){},e.prototype.extend=function(e,t){return null},e.prototype.subscribe=function(e,t,n,r){},e.prototype.unsubscribe=function(e,t,n){},e.prototype.once=function(e,t,n){},e.prototype.createFacade=function(e,t,n){if(!n.mediator||n.mediator instanceof C){var r;return n.mediator?(n.mediator.updateFacade(t,this),r=n.mediator):r=n.mediator=t.mediator=new C(t,this),r}throw new Error('"mediator" is a reserved property')},e.config=g,e}();t.Mediator=k,l.extend(k.prototype,p)}),define("thrust/mediator",["thrust/mediator/main"],function(e){return e}),define("thrust/mediator/convention/subscription",["require","exports","thrust/convention","thrust/util"],function(e,t,n,r){var i=n,s=i.Convention,o=r,u=o._,a="config.mediator.subscriptions",f=u.isFunction,l=u.isString,c=u.isArray,h=u.isObject,p=u.isPlainObject,d=u.forOwn,v=u.each,m=["handler","context"],g={properties:[a],start:function(e,t){var n=e.convention(a);if(n&&!n._subscriptionsSet){var r=e.instance;d(n,function(n,r){c(n)?n.length&&(!c(n[0])||l(n[0]))&&(n=[n]):n=[[n]],v(n,function(n){c(n)&&v(n,function(i,s){var o=[r];l(i)?(o.push(e.instance[i]),n[s+1]&&o.push(n[s+1])):f(i)?(o.push(i),n[s+1]&&o.push(n[s+1])):p(i)&&("moduleHandler"in i||"handler"in i)&&("moduleHandler"in i&&o.push(e.instance[i.moduleHandler]),"handler"in i&&(l(i)?o.push(e.instance[i.handler]):o.push(i.handler)),"context"in i&&o.push(i.context)),o.length>1&&t.subscribe.apply(t,o)})})}),e.convention(a)._subscriptionsSet=!0}},stop:function(e,t){var n=e.convention(a);n&&n._subscriptionsSet&&(e.convention(a)._subscriptionsSet=!1)}};t.subscription=new s(g)});